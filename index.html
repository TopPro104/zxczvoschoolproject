<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ—Ä—á –õ–∏—Ü–µ—è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 0; 
            padding: 20px; 
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); 
            min-height: 100vh;
        }
        h1 { text-align: center; color: #333; margin-bottom: 10px; }
        #filter { 
            margin-bottom: 20px; padding: 12px; width: 100%; box-sizing: border-box; 
            border: 2px solid #ddd; border-radius: 25px; font-size: 16px; 
            background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        #catalog { 
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; 
        }
        .product { 
            background: white; border-radius: 15px; padding: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            transition: transform 0.3s, box-shadow 0.3s; 
        }
        .product:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
        .carousel { 
            position: relative; width: 100%; height: 200px; overflow: hidden; margin-bottom: 10px; border-radius: 10px; 
        }
        .carousel img { 
            position: absolute; width: 100%; height: 100%; object-fit: cover; transition: left 0.5s ease; 
        }
        .carousel .nav-btn { 
            position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; 
            border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-size: 18px; 
        }
        .carousel .prev { left: 10px; }
        .carousel .next { right: 10px; }
        .price { font-weight: bold; color: #28a745; font-size: 1.2em; }
        .discount { color: #ffc107; font-size: 0.9em; }
        .out-of-stock { color: #dc3545; }
        button { 
            background: linear-gradient(45deg, #007bff, #0056b3); color: white; border: none; padding: 10px 15px; 
            cursor: pointer; border-radius: 25px; font-size: 14px; transition: background 0.3s; 
            display: flex; align-items: center; gap: 5px; justify-content: center; width: 100%; 
        }
        button:hover { background: linear-gradient(45deg, #0056b3, #004085); }
        .out-of-stock + button { background: #6c757d; cursor: not-allowed; }
        footer { text-align: center; margin-top: 30px; padding: 10px; color: #666; font-style: italic; }
        @keyframes slide { 0%, 50% { left: 0%; } 50.1%, 100% { left: -100%; } }
        .carousel.auto-slide img:first-child { animation: slide 6s infinite; }
    </style>
</head>
<body>
    <h1><i class="fas fa-shopping-bag"></i> –ö–∞—Ç–∞–ª–æ–≥ –º–µ—Ä—á–∞ –ª–∏—Ü–µ—è</h1>
    <input type="number" id="filter" placeholder="–ú–∞–∫—Å. –∫–æ–Ω–µ—á–Ω–∞—è —Ü–µ–Ω–∞" oninput="filterProducts()">
    <div id="catalog"></div>
    <footer>‚ö†Ô∏è –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–ª-–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–∫–∞ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞, –Ω–æ –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –æ–Ω–∞ —Ç–æ—á–Ω–æ –±—É–¥–µ—Ç... –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å... –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å...</footer> 

    <script>
        let products = [
            { id: 161025001, name: "–ë–ª–æ–∫–Ω–æ—Ç", description: "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –±–ª–æ–∫–Ω–æ—Ç –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ª–∏—Ü–µ—è", price: 150.00, discount: 0.30, final_price: 105.00, stock: 200, images: ["https://raw.githubusercontent.com/TopPro104/zxczvoschoolproject/main/%D0%B1%D0%BB%D0%BE%D0%BA%D0%BD%D0%BE%D1%82_1.png", "https://raw.githubusercontent.com/TopPro104/zxczvoschoolproject/main/%D0%B1%D0%BB%D0%BE%D0%BA%D0%BD%D0%BE%D1%82_2.png"] },
            { id: 161025002, name: "–ï–∂–µ–¥–Ω–µ–≤–Ω–∏–∫", description: "–°—Ç–∏–ª—å–Ω—ã–π –µ–∂–µ–¥–Ω–µ–≤–Ω–∏–∫ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è", price: 200.00, discount: 0.00, final_price: 200.00, stock: 200, images: ["https://raw.githubusercontent.com/TopPro104/zxczvoschoolproject/main/%D0%B5%D0%B6%D0%B5%D0%B4%D0%BD%D0%B5%D0%B2%D0%BD%D0%B8%D0%BA_1.png", "https://raw.githubusercontent.com/TopPro104/zxczvoschoolproject/main/%D0%B5%D0%B6%D0%B5%D0%B4%D0%BD%D0%B5%D0%B2%D0%BD%D0%B8%D0%BA_2.png"] },
            { id: 161025003, name: "–ö–µ–ø–∫–∞", description: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∫–µ–ø–∫–∞ —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º", price: 800.00, discount: 0.00, final_price: 800.00, stock: 50, images: ["https://raw.githubusercontent.com/TopPro104/zxczvoschoolproject/main/%D0%BA%D0%B5%D0%BF%D0%BA%D0%B0_1.png", "https://raw.githubusercontent.com/TopPro104/zxczvoschoolproject/main/%D0%BA%D0%B5%D0%BF%D0%BA%D0%B0_2.png"] },
            { id: 161025004, name: "–§—É—Ç–±–æ–ª–∫–∞", description: "–£–¥–æ–±–Ω–∞—è —Ñ—É—Ç–±–æ–ª–∫–∞ –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–∫–∏", price: 950.00, discount: 0.00, final_price: 950.00, stock: 50, images: ["https://raw.githubusercontent.com/TopPro104/zxczvoschoolproject/main/%D1%84%D1%83%D1%82%D0%B1%D0%BE%D0%BB%D0%BA%D0%B0_1.png", "https://raw.githubusercontent.com/TopPro104/zxczvoschoolproject/main/%D1%84%D1%83%D1%82%D0%B1%D0%BE%D0%BB%D0%BA%D0%B0_2.png"] },
            { id: 161025005, name: "–•—É–¥–∏", description: "–¢–µ–ø–ª–∞—è —Ö—É–¥–∏ —Å –ø—Ä–∏–Ω—Ç–æ–º –ª–∏—Ü–µ—è", price: 4000.00, discount: 0.10, final_price: 3600.00, stock: 60, images: ["https://raw.githubusercontent.com/TopPro104/zxczvoschoolproject/main/%D1%85%D1%83%D0%B4%D0%B8_1.png", "https://raw.githubusercontent.com/TopPro104/zxczvoschoolproject/main/%D1%85%D1%83%D0%B4%D0%B8_2.png"] },
            { id: 161025006, name: "–®–æ–ø–µ—Ä", description: "–≠–∫–æ–ª–æ–≥–∏—á–Ω—ã–π —à–æ–ø–µ—Ä –¥–ª—è –ø–æ–∫—É–ø–æ–∫", price: 500.00, discount: 0.05, final_price: 475.00, stock: 100, images: ["https://raw.githubusercontent.com/TopPro104/zxczvoschoolproject/main/%D1%88%D0%BE%D0%BF%D0%B5%D1%80_1.png", "https://raw.githubusercontent.com/TopPro104/zxczvoschoolproject/main/%D1%88%D0%BE%D0%BF%D0%B5%D1%80_2.png"] }
        ];

        let currentSlides = {};  // –ª–æ–ª —è —Ö–∑ —á–µ—Å—Ç–Ω–æ –∫–∞–∫ –≥–ª–∞–π–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ –º–Ω–µ —Å —ç—Ç–∏–º –ø–æ–¥—Å–∫–∞–∑–∞–ª grok, —è –µ–º—É –≤–µ—Ä—é –±–æ–ª—å—à–µ —á–µ–º —Å–µ–±–µüôèüôèüôè

        function renderCatalog(prods = products) {
            const catalog = document.getElementById('catalog');
            catalog.innerHTML = prods.map(p => `
                <div class="product">
                    <div class="carousel auto-slide" data-product="${p.id}">
                        ${p.images.map((img, i) => `<img src="${img}" style="left: ${i * 100}%;">`).join('')}
                        <button class="nav-btn prev" onclick="prevSlide(this.parentElement)"><i class="fas fa-chevron-left"></i></button>
                        <button class="nav-btn next" onclick="nextSlide(this.parentElement)"><i class="fas fa-chevron-right"></i></button>
                    </div>
                    <h3>${p.name}</h3>
                    <p>${p.description}</p>
                    <p class="price">${p.final_price.toFixed(2)} ‚ÇΩ ${p.discount > 0 ? `<span class="discount">(-${(p.discount*100).toFixed(0)}% –æ—Ç ${p.price.toFixed(2)} ‚ÇΩ)</span>` : ''}</p>
                    <p>${p.stock > 0 ? `<i class="fas fa-check-circle"></i> –í –Ω–∞–ª–∏—á–∏–∏ (${p.stock})` : '<i class="fas fa-times-circle"></i> –ù–µ—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ'}</p>
                    ${p.stock > 0 ? `<button onclick="addToCart(${p.id}, 1)"><i class="fas fa-cart-plus"></i> –í –∫–æ—Ä–∑–∏–Ω—É</button>` : '<button disabled><i class="fas fa-ban"></i> –ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</button>'}
                </div>
            `).join('');
            startAutoSlides();
        }

        function startAutoSlides() {
            document.querySelectorAll('.carousel').forEach(carousel => {
                const id = carousel.dataset.product;
                if (!currentSlides[id]) currentSlides[id] = 0;
                setInterval(() => {
                    nextSlide(carousel);
                }, 3000);
            });
        }

        function prevSlide(carousel) {
            const imgs = carousel.querySelectorAll('img');
            currentSlides[carousel.dataset.product] = currentSlides[carousel.dataset.product] === 0 ? imgs.length - 1 : currentSlides[carousel.dataset.product] - 1;
            imgs.forEach((img, i) => img.style.left = (i - currentSlides[carousel.dataset.product]) * 100 + '%');
        }

        function nextSlide(carousel) {
            const imgs = carousel.querySelectorAll('img');
            currentSlides[carousel.dataset.product] = (currentSlides[carousel.dataset.product] + 1) % imgs.length;
            imgs.forEach((img, i) => img.style.left = (i - currentSlides[carousel.dataset.product]) * 100 + '%');
        }

        function addToCart(id, qty) {
            const link = `https://t.me/School_projewct_bot?start=add_${id}_${qty}`;
            Telegram.WebApp.openTelegramLink(link);
            Telegram.WebApp.close();
        }

        function filterProducts() {
            const maxPrice = parseFloat(document.getElementById('filter').value) || Infinity;
            const filtered = products.filter(p => p.final_price <= maxPrice);
            renderCatalog(filtered);
        }

        if (window.Telegram && Telegram.WebApp) {
            Telegram.WebApp.ready();
            Telegram.WebApp.expand();
        }
        renderCatalog();
    </script>
</body>
</html>
